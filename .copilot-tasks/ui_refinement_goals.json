{
  "ui_refinement_goals": [
    {
      "id": "dashboard_chat_and_layout",
      "title": "Refine Dashboard Chat & Layout",
      "copilot_prompt": "You are acting as a frontend engineer refining the Crew-7 dashboard UI. Do NOT change the global dark/blueprint theme. Make targeted edits only.\n\nGoals – Chat Section:\n1) Make the chat behave like ChatGPT:\n   - Chat messages area is a scrollable column.\n   - Chat input is sticky at the bottom of the viewport.\n   - On smaller screens, input should always be visible without overlapping content.\n2) Messages styling:\n   - Remove obvious frames/borders around messages (no heavy cards with borders).\n   - Keep messages as clean dark bubbles or simple text blocks that fit our theme.\n   - Ensure markdown is rendered correctly: code blocks, lists, bold, headings.\n3) Implementation details:\n   - Find the main dashboard chat component (where user interacts with crews).\n   - Refactor the layout to a flex column: header (if any) → scrollable messages → sticky input.\n   - Use CSS (or Tailwind) so that the messages container has `overflow-y-auto` and fills remaining height, while the input stays pinned at bottom.\n\nGoals – Wallet Top-Up Dropdown:\n1) Locate the wallet / top-up UI in the dashboard (where C7T balance and “connect wallet” appear).\n2) Adjust the dropdown so that:\n   - The main \"Connect Wallet\" trigger button is aligned to the top-right of the wallet card/section.\n   - The dropdown panel is slightly smaller and visually clean (no oversized padding or huge shadows).\n   - Keep consistent with our dark theme and neon accents.\n3) Make sure the dropdown works well on mobile (no clipping off-screen).\n\nGoals – Remove Overly-Glassy Panels:\n1) In the dashboard and similar panels, find classes like:\n   - `rounded-3xl bg-white/8 shadow-[0_25px_60px_rgba(0,0,0,0.4)] backdrop-blur-x`\n2) Remove or simplify these in the dashboard and other sections where they appear:\n   - We do NOT want light `bg-white/8` overlays.\n   - Prefer darker backgrounds like `bg-slate-900/60` or existing dark tokens.\n   - Keep subtle shadows if needed, but no heavy glassmorphism.\n3) Make sure removing these classes does NOT break layout; adjust padding/margins if needed.\n\nConstraints:\n- Do NOT introduce white backgrounds.\n- Do NOT rename key components or break existing hooks/state.\n- Keep the rest of the dashboard behavior unchanged – this is a visual + UX refinement pass.\n"
    },
    {
      "id": "dashboard_onboarding_and_default_env",
      "title": "New User Onboarding State + Deploy Default Environment",
      "copilot_prompt": "You are implementing the \"first-time login\" experience and default environment setup for Crew-7. This must be driven by real state (e.g. flags from backend/user profile), not just UI hacks.\n\nNew User State (Post Register / First Login):\n1) For any newly registered user (or user with no environment set up yet):\n   - In the sidebar: all nav buttons should appear visually disabled / non-clickable EXCEPT:\n     * Sign out / Logout.\n   - In the profile dropdown: only the Sign out option should be active; other items should be disabled or hidden.\n   - The main dashboard content should be a clean, minimal section (no crews, no mission controls yet).\n   - Show a small notification or banner that displays:\n     * Logged-in time.\n     * User location (if available from backend/IP or profile). Keep it simple.\n   - Wallet:\n     * Initial balance should always show as **1000 C7T** for this state.\n     * User can still see a \"Connect wallet\" option and a way to top up via Stripe.\n   - The \"Mission signal\" indicator (the red status near time/location) should NOT be shown in this pre-setup state.\n   - Any text like \"Lead orchestrator from Select Crew Crew rotation Awaiting first command\" should be hidden until the environment is deployed.\n\nDeploy & Setup Default Env Button:\n1) In this clean state, add a primary button in the main area:\n   - Label: **\"Deploy and setup default env\"**.\n2) On click:\n   - Trigger a minimal animation area in the center: display the GIF `crew-7_deploy_animation.gif` from the `logos` root (make sure the path is correct relative to the frontend assets).\n   - Under the GIF, show a step list indicating what is happening, for example:\n     * `> Creating default collection: Crew-7`\n     * `> Creating default workspace: Crew-7 Commander Board`\n     * `> Creating default Crew: Atlas`\n     * `> Creating default project: Project-X`\n   - You can animate these lines appearing one by one (simple timed reveal is enough).\n\nBackend / State Wiring:\n1) Add or use an API endpoint like `POST /api/env/default-setup` (or align with existing naming) that:\n   - Creates the default collection `Crew-7`.\n   - Creates the default workspace `Crew-7 Commander Board`.\n   - Creates the default crew `Atlas`.\n   - Creates the default project `Project-X`.\n   - Marks the user as having a \"default environment initialized\" flag in DB.\n2) When the setup completes successfully:\n   - Update frontend state so that sidebar buttons become active.\n   - Restore normal dashboard content (crews, missions, mission signal, etc.).\n3) On error:\n   - Show a clean error message under the GIF.\n\nConstraints:\n- Do NOT break existing behavior for users that already have an environment.\n  - For those users, skip the clean onboarding state and show current dashboard as usual.\n- Implement the new state in a way that checks a real flag from the backend (e.g. `user.env_initialized`), not hardcoded booleans.\n"
    },
    {
      "id": "settings_apis_and_ui_wiring",
      "title": "Hook Settings UI to Real APIs (Account, Org, Billing, Security, Integrations, Notifications, Developer)",
      "copilot_prompt": "You are responsible for making sure the Settings pages actually talk to the backend APIs. The UI for Settings already exists; your job is to:\n- Check if APIs exist.\n- If not, create minimal backend endpoints.\n- Wire each settings form to load + save data.\n\nGeneral Rules:\n- Use existing API patterns and routes where possible.\n- All settings operations should be authenticated and scoped to the current user/org.\n- Never store secrets in frontend; always send them to backend via secure POST/PATCH.\n\n1) Account – Commander Profile\n--------------------------------\nUI text:\n- Sync your display details across the Crew-7 console.\n- Fields: Upload avatar, Display name, Email address, Timezone, Crew contact.\n- Buttons: Save changes, Reset, Request account deletion.\n\nBackend/API tasks:\n- Ensure endpoints like:\n  - GET `/api/settings/account` → returns current profile (name, email, timezone, contact, avatar URL).\n  - PATCH `/api/settings/account` → updates fields.\n  - POST `/api/settings/account/delete-request` → create account deletion request.\n\nFrontend wiring:\n- On mount, fetch account data and populate the form.\n- On \"Save changes\", PATCH to backend and show success/error state.\n- On \"Reset\", reset to last saved state from backend.\n- On \"Request account deletion\", call the delete-request endpoint and show confirmation.\n\n2) Organization – Organization Identity\n----------------------------------------\nUI text:\n- Fields: Company name, Primary domain, Allowed email domains.\n- Button: Save organization profile.\n\nBackend/API tasks:\n- Add endpoints like:\n  - GET `/api/settings/org` → returns org details.\n  - PATCH `/api/settings/org` → updates company name + domains.\n\nFrontend wiring:\n- Fetch data on mount, fill in form.\n- On Save, PATCH and show confirmation.\n- Ensure multi-domain input (if allowed) is properly serialized (e.g. array or comma-separated string).\n\n3) Billing (if present as its own tab)\n--------------------------------------\nUI currently mentions access control, TOTP, devices, SSO – this looks more like Security. If there is a separate billing model, keep it minimal for now or reuse. If this section is actually Security-related, treat it similar to Security below. Do NOT invent complex billing logic; just align with existing backend.\n\n4) Security – Mission Integrations / Access Control\n---------------------------------------------------\nUI text indicates:\n- Two-factor authentication (On/Off).\n- Device verification (On/Off).\n- Device fingerprint method: Email code.\n- SSO via Crew-7 Relay (Configure SAML, paste metadata XML).\n\nBackend/API tasks:\n- Endpoints such as:\n  - GET `/api/settings/security` → current security config.\n  - PATCH `/api/settings/security` → update toggles for 2FA, device verification, SSO mode.\n  - POST `/api/settings/security/saml` → upload SAML metadata XML.\n\nFrontend wiring:\n- Connect toggles to real values: when user flips TOTP or device verification, send PATCH to backend.\n- For SAML, allow pasting metadata and POST to backend; show validation result.\n\n5) Integrations\n----------------\nUI text:\n- Toggle providers and sync webhook destinations.\n- Manage API tokens.\n- Alert webhook URL (https:// ...), Save webhook button.\n\nBackend/API tasks:\n- Endpoints like:\n  - GET `/api/settings/integrations` → returns current webhooks + providers + tokens summary.\n  - PATCH `/api/settings/integrations/webhook` → update alert webhook URL.\n  - GET `/api/settings/integrations/tokens` + POST `/api/settings/integrations/tokens` for API tokens (if supported).\n\nFrontend wiring:\n- Load current webhook URL, display it in input.\n- On Save, PATCH the new URL and show success.\n- If token management UI exists, hook it to token endpoints.\n\n6) Notifications\n-----------------\nUI text:\n- Signal preferences: Email alerts, SMS handoff, Push notifications, Slack DM mirror, Quiet hours (start/end).\n\nBackend/API tasks:\n- Endpoints like:\n  - GET `/api/settings/notifications` → returns channel toggles + quiet hours.\n  - PATCH `/api/settings/notifications` → update preferences.\n\nFrontend wiring:\n- Map switches to booleans from backend.\n- Save quiet hours using proper time format.\n- On Save, PATCH and show confirmation.\n\n7) Developer – API Mode & Backend URL\n--------------------------------------\nUI text:\n- API Mode: Disconnected / Mock Data / Real API.\n- Backend API URL input (e.g. http://localhost:8000).\n- Status messages: \"Cannot connect to backend\" / \"Using real backend API\".\n\nBackend/API tasks:\n- This may be mostly front-end config, but if there is a central config in backend, add endpoints like:\n  - GET `/api/settings/dev` → returns current mode + default backend URL.\n  - PATCH `/api/settings/dev` → update mode/backend URL (if persisted per user/org).\n\nFrontend wiring:\n- Switch between Mock Data and Real API should change how the app fetches crews/runs (respect existing implementation – do not break it).\n- Test connection to backend: when Real API is selected, ping a simple health endpoint (e.g. `/api/health`) and show the correct status message.\n\nGlobal Constraints:\n- Use existing HTTP client utilities in the app (don’t introduce a new fetch helper unless necessary).\n- Keep error handling user-friendly but simple (inline messages under forms or small toasts).\n- Do NOT change the dark theme or add white backgrounds.\n- Do NOT remove existing settings sections; just make them functional.\n"
    }
  ]
}
